<!-- ===============================
     ELITE AI PDF GENERATOR PAGE
================================ -->

<style>

  /* Background */
  body {
    background: linear-gradient(135deg, #0f172a, #1e293b);
  }
  
  /* Card */
  .card {
    border: none;
    border-radius: 20px;
    background: rgba(255,255,255,0.95);
    backdrop-filter: blur(12px);
    box-shadow: 0 25px 60px rgba(0,0,0,0.25);
    transition: 0.3s ease;
  }
  
  .card:hover {
    transform: translateY(-5px);
  }
  
  /* Title */
  .card-title {
    font-size: 2rem;
    font-weight: 700;
    text-align: center;
    margin-bottom: 30px;
    background: linear-gradient(135deg, #2563eb, #10b981);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  
  /* Select & Input */
  .form-select,
  .form-control {
    border-radius: 12px;
    padding: 10px 14px;
    border: 1px solid #e2e8f0;
    transition: 0.3s ease;
  }
  
  .form-select:focus,
  .form-control:focus {
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59,130,246,0.2);
  }
  
  /* Generate Button */
  .btn-generate {
    background: linear-gradient(135deg, #2563eb, #3b82f6);
    border: none;
    border-radius: 12px;
    font-weight: 600;
    padding: 12px;
    transition: 0.3s ease;
    color: white;
  }
  
  .btn-generate:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(37,99,235,0.4);
  }
  
  /* Download Button */
  .btn-download {
    background: linear-gradient(135deg, #16a34a, #22c55e);
    border: none;
    border-radius: 10px;
    font-weight: 600;
    padding: 8px 16px;
    color: white;
    transition: 0.3s ease;
  }
  
  .btn-download:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(34,197,94,0.4);
  }
  
  /* Question Panel */
  .questions-panel {
    max-height: 400px;
    overflow-y: auto;
    background: #f8fafc;
    padding: 20px;
    border-radius: 15px;
    margin-top: 20px;
  }
  
  /* Question Block */
  .question-block {
    background: white;
    padding: 15px;
    border-radius: 12px;
    margin-bottom: 15px;
    transition: 0.3s ease;
  }
  
  .question-block:hover {
    background: #eef2ff;
    transform: translateY(-2px);
  }
  
  /* List group style */
  .list-group-item {
    border: none;
    padding: 5px 10px;
    font-size: 0.95rem;
    border-radius: 6px;
    transition: 0.2s ease;
  }
  
  .list-group-item:hover {
    background-color: #e0f2fe;
  }
  
  /* Generated PDFs list */
  .generated-pdfs {
    margin-top: 30px;
  }
  
  .generated-pdfs .list-group-item {
    border-radius: 10px;
    margin-bottom: 8px;
  }
  
  /* Alerts */
  .alert {
    border-radius: 10px;
    font-size: 14px;
  }
  
  </style>
  
  
  <div class="container my-5">
    <div class="card p-4">
  
      <h3 class="card-title">AI PDF Question Generator</h3>
  
      <!-- Grade Level & Subject -->
      <div class="row g-3 mb-4">
        <div class="col-md-6">
          <label class="form-label">Grade Level</label>
          <select class="form-select"
                  [(ngModel)]="selectedGradeLevelId"
                  (change)="onGradeLevelChange()">
            <option value="">Select Grade Level</option>
            <option *ngFor="let g of gradeLevels" [value]="g.id">
              {{ g.name }}
            </option>
          </select>
        </div>
  
        <div class="col-md-6">
          <label class="form-label">Subject</label>
          <select class="form-select"
                  [(ngModel)]="selectedSubjectId"
                  (change)="onSubjectChange()">
            <option value="">Select Subject</option>
            <option *ngFor="let s of subjects" [value]="s.id">
              {{ s.name }}
            </option>
          </select>
        </div>
      </div>
  
      <!-- File Upload -->
      <div class="row g-3 align-items-end mb-3">
        <div class="col-md-8">
          <label class="form-label">Upload PDF</label>
          <input type="file"
                 class="form-control"
                 (change)="onFileSelected($event)" />
        </div>
  
        <div class="col-md-4 d-grid">
          <button class="btn btn-generate"
                  (click)="generateQuestions()"
                  [disabled]="loading">
            {{ loading ? 'Generating...' : 'Generate Questions' }}
          </button>
        </div>
      </div>
  
      <!-- Alerts -->
      <div *ngIf="errorMsg" class="alert alert-danger">
        {{ errorMsg }}
      </div>
  
      <div *ngIf="successMsg" class="alert alert-success">
        {{ successMsg }}
      </div>
  
      <!-- Download Latest PDF -->
      <div *ngIf="downloadUrl" class="text-end">
        <button class="btn btn-download"
                (click)="downloadPDF()">
          ðŸ“¥ Download PDF
        </button>
      </div>
  
      <!-- Questions Preview -->
      <div *ngIf="generatedQuestions.length > 0"
           class="questions-panel">
  
        <div *ngFor="let q of generatedQuestions; let i = index"
             class="question-block">
  
          <h6>{{ i + 1 }}. {{ q.question }}</h6>
  
          <ul class="list-group list-group-flush">
            <li class="list-group-item">A. {{ q.options.A }}</li>
            <li class="list-group-item">B. {{ q.options.B }}</li>
            <li class="list-group-item">C. {{ q.options.C }}</li>
            <li class="list-group-item">D. {{ q.options.D }}</li>
          </ul>
  
        </div>
      </div>
  
      <!-- Generated PDFs List -->
      <div *ngIf="generatedPDFs.length > 0"
           class="generated-pdfs">
  
        <h5 class="mt-4 mb-3">Generated PDFs</h5>
  
        <ul class="list-group">
          <li *ngFor="let pdf of generatedPDFs"
              class="list-group-item d-flex justify-content-between align-items-center">
  
            {{ pdf.filePath.split('/').pop() }}
  
            <a class="btn btn-sm btn-outline-primary"
               [href]="'http://localhost:5000' + pdf.downloadUrl"
               target="_blank">
              Download
            </a>
  
          </li>
        </ul>
  
      </div>
  
    </div>
  </div>